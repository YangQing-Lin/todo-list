# Go Todo List - 完整学习路线图

> **项目定位**: 通过实践学习 Go 后端开发
> **学习方式**: 渐进式 - 从基础到生产级
> **Claude 角色**: 导师和领航员(指导,不代替编码)

---

## 📊 学习进度总览

```
阶段1: 基础CRUD        [████████████] 100% ✅ 已完成
阶段2: 进阶查询        [████████████] 100% ✅ 已完成
阶段3: 并发和可靠性     [░░░░░░░░░░░░]   0%  ⬅️ 当前阶段
阶段4: 事务和批量       [░░░░░░░░░░░░]   0%
阶段5: 生产级工程       [░░░░░░░░░░░░]   0%
```

---

## 🎯 各阶段详细规划

### ✅ 阶段1: 基础 CRUD (已完成)

**学习目标**:
- 掌握 Go HTTP 服务器基础
- 理解 database/sql 包的使用
- 掌握错误处理模式
- 实现统一响应格式

**已实现功能**:
- ✅ POST /api/v1/todos - 创建待办
- ✅ GET /api/v1/todos - 查询列表
- ✅ PUT /api/v1/todos/{id} - 更新待办(带乐观锁)
- ✅ DELETE /api/v1/todos/{id} - 删除待办
- ✅ 统一错误处理
- ✅ CORS 中间件
- ✅ Panic 恢复中间件

**核心文件**:
```
handler/handler.go    - HTTP 处理器
database/db.go        - 数据库操作
model/todo.go         - 数据模型
api/routes.go         - 路由注册
```

---

### ✅ 阶段2: 进阶查询 (已完成)

**学习目标**:
- 掌握动态 SQL 构建
- 防止 SQL 注入
- 实现分页和排序
- 掌握 SQL 聚合函数

**已实现功能**:
- ✅ 筛选(status=pending/completed/all)
- ✅ 搜索(title/description LIKE)
- ✅ 排序(created_at/due_date/status ASC/DESC)
- ✅ 分页(limit + offset)
- ✅ 统计(total/pending/completed/overdue/today/this_week)

**教学文档**:
- `docs/教学-1-筛选搜索分页API.md`
- `docs/教学-2-统计信息API.md`

---

### ⏳ 阶段3: 并发和可靠性 (当前阶段)

**学习目标**:
- 掌握 Context 使用
- 实现超时控制
- 实现优雅关闭
- 掌握事务基础

**待实现功能**:
1. **Context 与超时控制** 📄 `教学-3-Context与超时控制.md` ✅ 已编写
   - 所有数据库操作支持 Context
   - 请求级别的超时控制
   - 取消信号传播
   - 超时错误处理

2. **优雅关闭** 📄 `教学-4-优雅关闭.md` ✅ 已编写
   - 信号捕获(SIGINT/SIGTERM)
   - HTTP 服务器优雅关闭
   - 数据库连接清理
   - 关闭超时处理

3. **事务基础** 📄 `教学-5-事务基础.md` ✅ 已编写
   - 理解 ACID 特性
   - Go 事务使用模式
   - 简单批量操作(全有或全无)
   - 事务错误处理

**预计时间**: 6-8 小时

---

### 📌 阶段4: 进阶功能 (可选)

**学习目标**:
- 深入理解批量操作
- 掌握部分失败处理
- 了解并发安全
- 数据库迁移实践

**可选内容**:
1. **批量操作进阶** 📄 `教学-5b-批量操作进阶.md` (可选)
   - 部分失败策略
   - 错误结果追踪
   - BatchResult 结构
   - 详细错误信息
   - 复杂的事务处理

2. **并发安全** (理论学习)
   - 理解 Go 的并发模型
   - 识别数据竞争
   - sync 包使用
   - race detector 使用

3. **数据库迁移** 📄 `扩展阅读-数据库迁移与Schema清理.md` (扩展)
   - Schema 版本管理
   - 安全迁移策略
   - ALTER TABLE 风险

**预计时间**: 根据兴趣选择学习

**建议**: 这些都是进阶内容，可根据实际需要选择性学习

---

### 🏭 阶段5: 生产级工程

**学习目标**:
- 掌握性能优化技巧
- 实现可观测性
- 了解部署实践
- 理解生产级架构

**待实现功能**:
1. **性能优化**
   - 数据库索引优化
   - 连接池配置
   - 查询性能分析
   - 内存优化

2. **日志和监控**
   - 结构化日志(slog)
   - 请求日志中间件
   - 错误追踪
   - 性能指标(Prometheus)

3. **配置管理**
   - 环境变量
   - 配置文件
   - 敏感信息管理
   - 多环境支持

4. **数据库迁移** (可选)
   - Schema 版本管理
   - 安全迁移策略
   - 回滚机制

**参考文档**:
- `docs/教学-3-数据库迁移与Schema清理.md` (可选)

**预计时间**: 10-15 小时

**注意**: 部分内容(如迁移)可以跳过,专注于核心技能

---

## 📅 推荐学习时间线

### 第 1-2 周: 已完成 ✅
- Day 1-3: 基础 CRUD
- Day 4-6: 进阶查询
- Day 7: 代码审查和优化

### 第 3 周: 并发和可靠性(当前阶段)
- **Day 8-9**: Context 与超时控制
  - 理解 Context 概念
  - 实现数据库 Context 支持
  - 实现 Handler 超时控制
  - 测试超时场景

- **Day 10-11**: 优雅关闭
  - 理解信号处理
  - 实现优雅关闭
  - 测试关闭流程
  - 集成到 main.go

- **Day 12-13**: 事务基础
  - 理解 ACID 特性
  - 掌握 Go 事务模式
  - 实现简单批量操作
  - 测试事务回滚

### 第 4 周: 进阶内容(可选)
- **Day 14-15**: 批量操作进阶(可选)
  - 部分失败处理
  - 错误结果追踪
  - 复杂事务场景

- **Day 16**: 并发安全理论(可选)
  - 数据竞争分析
  - sync 包学习
  - race detector 使用

### 第 5 周: 生产级工程
- **Day 17-18**: 日志和监控
  - 结构化日志
  - 请求日志中间件
  - 错误追踪

- **Day 19-20**: 性能优化
  - 数据库索引
  - 查询优化
  - 压力测试

- **Day 21**: 总结和复盘
  - 代码审查
  - 文档整理
  - 学习总结

---

## 🎓 学习方法建议

### 对于每个新特性:

1. **理解原理** (30%)
   - 阅读教学文档
   - 理解"为什么"和"怎么做"
   - 看代码示例

2. **手动实现** (50%)
   - **自己编写后端代码**(不用 AI 直接修改)
   - Claude 只提供示例和指导
   - 遇到问题先思考再提问

3. **测试验证** (20%)
   - 运行测试脚本
   - 手动测试边界情况
   - 使用 `go test -race`

4. **代码审查**
   - 请 Claude 审查你的代码
   - 指出问题和改进点
   - 理解最佳实践

---

## 📚 配套教学文档清单

### 核心教学文档
- ✅ `教学-1-筛选搜索分页API.md` - 动态 SQL
- ✅ `教学-2-统计信息API.md` - 聚合查询
- ✅ `教学-3-Context与超时控制.md` - Context 使用
- ✅ `教学-4-优雅关闭.md` - Graceful Shutdown
- ✅ `教学-5-事务基础.md` - 事务和简单批量操作

### 进阶文档(可选)
- 📄 `教学-5b-批量操作进阶.md` - 部分失败处理(进阶)
- 📄 `扩展阅读-数据库迁移与Schema清理.md` - 生产级迁移

### 待编写文档
- ⏳ `教学-6-日志和监控.md` - 结构化日志
- ⏳ `教学-7-性能优化.md` - 数据库优化
- ⏳ `教学-8-并发安全理论.md` - sync 包和 race detector

---

## 🚫 不推荐实现的功能

以下功能超出学习范围,不推荐花时间实现:

1. **认证和授权** - 独立大专题,需要额外 2-3 周
2. **WebSocket 实时推送** - 超出 RESTful API 范围
3. **文件上传** - 不是核心 CRUD 学习内容
4. **复杂的权限系统** - 过度设计
5. **微服务拆分** - 单体应用更适合学习

**原则**: 专注于 Go 核心特性,不要被功能需求带偏

---

## 🎯 学习目标总结

完成本项目后,你应该掌握:

### Go 语言核心
- ✅ 基础语法和类型系统
- ✅ 错误处理模式
- ⏳ Context 和取消机制
- ⏳ goroutine 和并发
- ⏳ 信号处理
- ⏳ 事务和资源管理

### HTTP 服务开发
- ✅ net/http 标准库
- ✅ 路由和中间件
- ✅ RESTful API 设计
- ⏳ 优雅关闭
- ⏳ 超时控制

### 数据库操作
- ✅ database/sql 包
- ✅ 参数化查询(防SQL注入)
- ✅ 动态 SQL 构建
- ⏳ 事务处理
- ⏳ 连接池配置

### 生产级实践
- ✅ 错误处理
- ⏳ 日志记录
- ⏳ 资源清理
- ⏳ 性能优化
- ⏳ 代码组织

---

## 💬 与 Claude 协作的正确方式

### Claude 的角色 ✅
1. **讲解原理**: 解释为什么需要某个特性
2. **提供示例**: 给出完整的代码示例
3. **代码审查**: 审查你编写的代码,指出问题
4. **答疑解惑**: 回答你的技术问题
5. **引导思考**: 启发你思考设计决策

### Claude 不应该做的 ❌
1. ~~直接修改你的后端代码~~
2. ~~一次性完成整个功能~~
3. ~~替代你的学习过程~~

### 正确的学习流程
```
你: "我想实现 Context 超时控制,应该怎么做?"
    ↓
Claude: [讲解原理] + [提供完整示例] + [指出注意事项]
    ↓
你: [自己编写代码] + [运行测试]
    ↓
你: "我写了这段代码,帮我审查一下"
    ↓
Claude: [审查代码] + [指出问题] + [建议改进]
    ↓
你: [修改代码] + [再次测试]
    ↓
✅ 完成学习
```

---

## 🔄 灵活调整的空间

学习路线不是死板的,可以根据情况调整:

### 可以跳过的内容
- 并发安全(如果没有并发场景)
- 完整版批量操作(简化版足够)
- 数据库迁移(demo 项目用不上)

### 可以深入的内容
- 性能优化(如果对性能感兴趣)
- 日志和监控(如果想了解可观测性)
- 部署实践(如果想学 Docker/K8s)

### 可以扩展的方向
- 换成 PostgreSQL(学习不同数据库特性)
- 添加 Redis 缓存(学习缓存策略)
- 编写集成测试(学习测试金字塔)

---

## 📖 推荐学习资源

### 官方文档
- [Go 官方教程](https://go.dev/tour/)
- [database/sql 文档](https://pkg.go.dev/database/sql)
- [context 包文档](https://pkg.go.dev/context)

### 推荐阅读
- [Effective Go](https://go.dev/doc/effective_go)
- [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments)

### 工具
- `go test -race` - 检测数据竞争
- `go vet` - 静态分析
- `gofmt` - 代码格式化

---

## 🎉 下一步行动

**立即开始**: 阅读 `docs/教学-3-Context与超时控制.md`,开始实现 Context 支持

**推荐学习顺序**:
1. 教学-3: Context 与超时控制(2-3小时)
2. 教学-4: 优雅关闭(2-3小时)
3. 教学-5: 事务基础(3-4小时)
4. (可选)教学-5b: 批量操作进阶
5. (可选)扩展阅读: 数据库迁移

**记住**:
- 自己动手编写代码
- 遇到问题先思考
- 完成后请 Claude 审查

---

**Go 语言的核心理念: "简单、实用、高效"**

祝学习顺利! 💪
