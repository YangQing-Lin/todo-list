# Go Todo List - 完整学习路线图

> **项目定位**: 通过实践学习 Go 后端开发
> **学习方式**: 渐进式 - 从基础到生产级
> **Claude 角色**: 导师和领航员(指导,不代替编码)

---

## 📊 学习进度总览

```
阶段1: 基础CRUD        [████████████] 100% ✅ 已完成
阶段2: 进阶查询        [████████████] 100% ✅ 已完成
阶段3: 并发和可靠性     [░░░░░░░░░░░░]   0%  ⬅️ 当前阶段
阶段4: 事务和批量       [░░░░░░░░░░░░]   0%
阶段5: 实用功能         [░░░░░░░░░░░░]   0%
阶段6: 生产级工程       [░░░░░░░░░░░░]   0%
```

---

## 🎯 各阶段详细规划

### ✅ 阶段1: 基础 CRUD (已完成)

**学习目标**:
- 掌握 Go HTTP 服务器基础
- 理解 database/sql 包的使用
- 掌握错误处理模式
- 实现统一响应格式

**已实现功能**:
- ✅ POST /api/v1/todos - 创建待办
- ✅ GET /api/v1/todos - 查询列表
- ✅ PUT /api/v1/todos/{id} - 更新待办(带乐观锁)
- ✅ DELETE /api/v1/todos/{id} - 删除待办
- ✅ 统一错误处理
- ✅ CORS 中间件
- ✅ Panic 恢复中间件

**教学文档**:
- `docs/教学-1-筛选搜索分页API.md`
- `docs/教学-2-统计信息API.md`

---

### ✅ 阶段2: 进阶查询 (已完成)

**学习目标**:
- 掌握动态 SQL 构建
- 防止 SQL 注入
- 实现分页和排序
- 掌握 SQL 聚合函数

**已实现功能**:
- ✅ 筛选(status=pending/completed/all)
- ✅ 搜索(title/description LIKE)
- ✅ 排序(created_at/due_date/status ASC/DESC)
- ✅ 分页(limit + offset)
- ✅ 统计(total/pending/completed/overdue/today/this_week)

---

### ⏳ 阶段3: 并发和可靠性 (当前阶段)

**学习目标**:
- 掌握 Context 使用
- 实现超时控制
- 实现优雅关闭

**待实现功能**:
1. **Context 与超时控制** 📄 `教学-3-Context与超时控制.md`
   - 所有数据库操作支持 Context
   - 请求级别的超时控制
   - 取消信号传播

2. **优雅关闭** 📄 `教学-4-优雅关闭.md`
   - 信号捕获(SIGINT/SIGTERM)
   - HTTP 服务器优雅关闭
   - 数据库连接清理

**预计时间**: 4-6 小时

---

### 📌 阶段4: 事务和批量

**学习目标**:
- 理解 ACID 特性
- 掌握 Go 事务使用
- 实现批量操作

**待实现功能**:
1. **事务基础** 📄 `教学-5-事务基础.md`
   - Go 事务使用模式
   - 简单批量操作(全有或全无)
   - 事务错误处理

2. **批量操作进阶** 📄 `教学-6-批量操作进阶.md` (可选)
   - 部分失败策略
   - BatchResult 结构
   - 复杂事务处理

**预计时间**: 4-6 小时

---

### 🚀 阶段5: 实用功能

**学习目标**:
- 学习 io/encoding 包
- 理解数据库设计模式
- 掌握 goroutine 生命周期管理
- 理解一对多关系

**待实现功能**:

1. **导入/导出功能** 📄 `教学-7-导入导出功能.md`
   - JSON/CSV 导出
   - JSON/CSV 导入
   - 流式处理
   - 文件上传

2. **软删除与回收站** 📄 `教学-8-软删除与回收站.md`
   - 软删除标记
   - 回收站查看/恢复
   - 永久删除
   - 数据库迁移实践

3. **请求日志中间件** 📄 `教学-9-请求日志中间件.md`
   - `log/slog` 结构化日志
   - ResponseWriter 包装
   - 请求 ID 追踪
   - 日志级别配置

4. **后台定时任务** 📄 `教学-10-后台定时任务.md`
   - `time.Ticker` 使用
   - goroutine 生命周期管理
   - 优雅关闭定时任务
   - `sync.WaitGroup` 等待

5. **子任务/检查清单** 📄 `教学-11-子任务检查清单.md`
   - 一对多关系设计
   - 外键约束(级联删除)
   - N+1 查询问题解决
   - 进度计算

**预计时间**: 10-15 小时

---

### 🏭 阶段6: 生产级工程

**学习目标**:
- 掌握性能优化技巧
- 实现简单缓存
- 理解并发安全

**待实现功能**:

1. **简单缓存层** 📄 `教学-12-简单缓存层.md`
   - `sync.Map` 并发安全
   - TTL 过期机制
   - 写入时失效策略
   - 缓存命中率监控

2. **性能优化** (可选)
   - 数据库索引优化
   - 连接池配置
   - 查询性能分析

3. **配置管理** (可选)
   - 环境变量
   - 配置文件
   - 多环境支持

**预计时间**: 4-6 小时

---

## 📚 完整教学文档清单

### 核心教学文档(已编写)

| 编号 | 文档名称 | 学习内容 | 难度 |
|------|----------|----------|------|
| 1 | 筛选搜索分页API | 动态 SQL、参数化查询 | ⭐⭐ |
| 2 | 统计信息API | SQL 聚合函数、CASE WHEN | ⭐⭐ |
| 3 | Context与超时控制 | context 包、超时处理 | ⭐⭐⭐ |
| 4 | 优雅关闭 | 信号处理、资源清理 | ⭐⭐⭐ |
| 5 | 事务基础 | ACID、事务模式 | ⭐⭐⭐ |
| 6 | 批量操作进阶 | 部分失败、错误追踪 | ⭐⭐⭐⭐ |
| 7 | 导入导出功能 | io/encoding 包、文件处理 | ⭐⭐⭐ |
| 8 | 软删除与回收站 | 数据库设计模式、迁移 | ⭐⭐⭐ |
| 9 | 请求日志中间件 | log/slog、中间件高级技巧 | ⭐⭐⭐ |
| 10 | 后台定时任务 | time.Ticker、goroutine 管理 | ⭐⭐⭐⭐ |
| 11 | 子任务检查清单 | 一对多关系、外键约束 | ⭐⭐⭐⭐ |
| 12 | 简单缓存层 | sync.Map、TTL 缓存 | ⭐⭐⭐⭐ |

### 扩展阅读
- 📄 `扩展阅读-数据库迁移与Schema清理.md` - 生产级迁移

---

## 📅 推荐学习时间线

### 第 1-2 周: 已完成 ✅
- Day 1-3: 基础 CRUD
- Day 4-6: 进阶查询
- Day 7: 代码审查和优化

### 第 3 周: 并发和可靠性
- **Day 8-9**: Context 与超时控制
- **Day 10-11**: 优雅关闭
- **Day 12-13**: 事务基础

### 第 4 周: 实用功能(上)
- **Day 14-15**: 导入/导出功能
- **Day 16-17**: 软删除与回收站
- **Day 18**: 请求日志中间件

### 第 5 周: 实用功能(下)
- **Day 19-20**: 后台定时任务
- **Day 21-22**: 子任务/检查清单
- **Day 23**: 代码审查

### 第 6 周: 生产级工程
- **Day 24-25**: 简单缓存层
- **Day 26-27**: 性能优化(可选)
- **Day 28**: 总结和复盘

---

## 🎓 学习方法建议

### 对于每个新特性:

1. **理解原理** (30%)
   - 阅读教学文档
   - 理解"为什么"和"怎么做"
   - 看代码示例

2. **手动实现** (50%)
   - **自己编写后端代码**(不用 AI 直接修改)
   - Claude 只提供示例和指导
   - 遇到问题先思考再提问

3. **测试验证** (20%)
   - 运行测试脚本
   - 手动测试边界情况
   - 使用 `go test -race`

4. **代码审查**
   - 请 Claude 审查你的代码
   - 指出问题和改进点
   - 理解最佳实践

---

## 🎯 学习目标总结

完成本项目后,你应该掌握:

### Go 语言核心
- ✅ 基础语法和类型系统
- ✅ 错误处理模式
- ⏳ Context 和取消机制
- ⏳ goroutine 和并发
- ⏳ 信号处理
- ⏳ 事务和资源管理
- ⏳ sync 包(Map、WaitGroup、RWMutex)

### HTTP 服务开发
- ✅ net/http 标准库
- ✅ 路由和中间件
- ✅ RESTful API 设计
- ⏳ 优雅关闭
- ⏳ 超时控制
- ⏳ 结构化日志(slog)

### 数据库操作
- ✅ database/sql 包
- ✅ 参数化查询(防SQL注入)
- ✅ 动态 SQL 构建
- ⏳ 事务处理
- ⏳ 外键约束
- ⏳ 软删除模式

### 生产级实践
- ✅ 错误处理
- ⏳ 日志记录
- ⏳ 资源清理
- ⏳ 内存缓存
- ⏳ 定时任务

---

## 💬 与 Claude 协作的正确方式

### Claude 的角色 ✅
1. **讲解原理**: 解释为什么需要某个特性
2. **提供示例**: 给出完整的代码示例
3. **代码审查**: 审查你编写的代码,指出问题
4. **答疑解惑**: 回答你的技术问题
5. **引导思考**: 启发你思考设计决策

### Claude 不应该做的 ❌
1. ~~直接修改你的后端代码~~
2. ~~一次性完成整个功能~~
3. ~~替代你的学习过程~~

### 正确的学习流程
```
你: "我想实现 Context 超时控制,应该怎么做?"
    ↓
Claude: [讲解原理] + [提供完整示例] + [指出注意事项]
    ↓
你: [自己编写代码] + [运行测试]
    ↓
你: "我写了这段代码,帮我审查一下"
    ↓
Claude: [审查代码] + [指出问题] + [建议改进]
    ↓
你: [修改代码] + [再次测试]
    ↓
✅ 完成学习
```

---

## 🚫 不推荐实现的功能

以下功能超出学习范围,不推荐花时间实现:

1. **认证和授权** - 独立大专题,需要额外 2-3 周
2. **WebSocket 实时推送** - 超出 RESTful API 范围
3. **文件上传(图片/附件)** - 需要额外存储服务
4. **复杂的权限系统** - 过度设计
5. **微服务拆分** - 单体应用更适合学习
6. **分布式缓存(Redis)** - 内存缓存足够学习

**原则**: 专注于 Go 核心特性,不要被功能需求带偏

---

## 🎉 下一步行动

**推荐学习顺序**:
1. 教学-3: Context 与超时控制 (2-3小时)
2. 教学-4: 优雅关闭 (2-3小时)
3. 教学-5: 事务基础 (3-4小时)
4. 教学-7: 导入导出功能 (3-4小时)
5. 教学-8: 软删除与回收站 (3-4小时)
6. 教学-9: 请求日志中间件 (2-3小时)
7. 教学-10: 后台定时任务 (2-3小时)
8. 教学-11: 子任务检查清单 (3-4小时)
9. 教学-12: 简单缓存层 (2-3小时)

**可选进阶**:
- 教学-6: 批量操作进阶

**记住**:
- 自己动手编写代码
- 遇到问题先思考
- 完成后请 Claude 审查

---

**Go 语言的核心理念: "简单、实用、高效"**

祝学习顺利! 💪
