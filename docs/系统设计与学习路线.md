# Go Todo List 项目系统设计与学习路线

## 项目概述

**项目名称**: Go Todo List
**学习者**: 2年Python后端经验
**学习目标**: 通过实践掌握Go语言核心特性
**技术栈**: React前端(由AI开发) + Go后端 + SQLite数据库
**项目周期**: 3周（21天）

## 技术架构设计

### 系统架构图
```
┌─────────────────┐    HTTP API    ┌─────────────────┐    SQL     ┌──────────────┐
│   React 前端    │ ◄────────────► │   Go 后端服务   │ ◄─────────► │  SQLite数据库 │
│   (AI开发)      │                │   (标准库实现)   │            │  (单文件)     │
└─────────────────┘                └─────────────────┘            └──────────────┘
```

### 后端技术选型原则
- **框架**: 使用Go标准库 `net/http`，不用第三方框架
- **数据库**: SQLite + `database/sql` 标准包
- **路由**: 自己实现简单路由器
- **JSON处理**: `encoding/json` 标准包
- **日志**: `log` 标准包
- **测试**: `testing` 标准包

## 数据库设计

### 核心数据结构

#### Todos 表
```sql
CREATE TABLE todos (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    description TEXT DEFAULT '',
    status TEXT NOT NULL CHECK (status IN ('pending', 'completed')),
    priority INTEGER DEFAULT 1 CHECK (priority BETWEEN 1 AND 3),
    due_date TEXT, -- ISO8601格式字符串
    created_at TEXT NOT NULL, -- ISO8601
    updated_at TEXT NOT NULL, -- ISO8601
    completed_at TEXT -- ISO8601, 可为空
);
```

#### Tags 表（第三阶段）
```sql
CREATE TABLE tags (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    color TEXT DEFAULT '#007bff',
    created_at TEXT NOT NULL
);
```

#### Todo_Tags 关联表（第三阶段）
```sql
CREATE TABLE todo_tags (
    todo_id INTEGER,
    tag_id INTEGER,
    PRIMARY KEY (todo_id, tag_id),
    FOREIGN KEY (todo_id) REFERENCES todos(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
);
```

## 功能开发路线图

### 第一周：Go基础与核心功能（MVP）

#### Day 1-2: Go语言基础 + HTTP服务搭建
**学习目标**:
- Go语法基础（变量、函数、结构体）
- Go模块管理（go mod）
- HTTP服务器创建

**开发任务**:
```go
// 文件结构
todo-list/
├── main.go              // 主入口
├── go.mod              // Go模块文件
├── handler/            // 处理器目录
│   └── handler.go      // HTTP处理器
└── model/              // 数据模型
    └── todo.go         // Todo结构体
```

**实现功能**:
- 创建HTTP服务器
- 实现基础路由 `/api/todos`
- 返回简单的JSON响应

#### Day 3-4: SQLite集成 + CRUD实现
**学习目标**:
- 数据库连接和操作
- SQL预处理语句
- 错误处理模式

**开发任务**:
```go
// 新增文件
├── database/           // 数据库相关
│   ├── db.go          // 数据库连接
│   └── queries.go     // SQL查询
└── api/               // API路由
    └── routes.go      // 路由定义
```

**实现功能**:
- 创建数据库连接
- 实现Todo的增删改查
- API端点：
  - POST /api/todos - 创建Todo
  - GET /api/todos - 获取所有Todo
  - PUT /api/todos/{id} - 更新Todo
  - DELETE /api/todos/{id} - 删除Todo

#### Day 5-6: 错误处理 + 数据验证
**学习目标**:
- Go的错误处理模式
- 自定义错误类型
- 数据验证

**实现功能**:
- 统一错误处理中间件
- 请求数据验证
- 响应格式标准化

#### Day 7: 测试 + 性能优化
**学习目标**:
- 单元测试编写
- 基准测试
- 代码优化

**实现功能**:
- 为所有API编写单元测试
- 性能基准测试
- 代码重构优化

### 第二周：Go并发特性 + 进阶功能

#### Day 8-9: 优先级系统
**学习目标**:
- Go枚举模式实现
- 常量定义
- 结构体方法

**实现功能**:
- Todo优先级（高=3，中=2，低=1）
- 按优先级排序
- 优先级过滤

#### Day 10-11: 截止日期管理
**学习目标**:
- Go时间处理（time包）
- 时间格式化和解析
- 时区处理

**实现功能**:
- 设置/更新截止日期
- 查询即将到期任务
- 标记过期任务

#### Day 12-13: Goroutine并发处理
**学习目标**:
- Goroutine使用
- Channel通信
- 并发安全

**实现功能**:
- 批量操作并发处理
- 后台任务处理（如自动标记过期）
- 并发安全的数据访问

#### Day 14: 中间件系统
**学习目标**:
- 中间件模式
- 请求上下文
- 日志记录

**实现功能**:
- 请求日志中间件
- CORS中间件
- 响应时间记录

### 第三周：Go高级特性 + 完整功能

#### Day 15-16: 搜索和过滤系统
**学习目标**:
- Go字符串操作
- 正则表达式
- 查询构建器模式

**实现功能**:
- 按标题搜索
- 多条件过滤（状态、优先级、日期范围）
- 排序功能

#### Day 17-18: 标签系统
**学习目标**:
- 多对多关系设计
- 复杂查询
- 事务处理

**实现功能**:
- 标签CRUD
- Todo-Tag关联
- 按标签过滤

#### Day 19-20: 接口设计与重构
**学习目标**:
- Go接口定义
- 依赖注入
- 代码解耦

**实现功能**:
- 定义Repository接口
- 实现依赖注入
- 代码架构重构

#### Day 21: 项目完善 + 部署
**学习目标**:
- 生产环境配置
- 性能优化
- 部署流程

**实现功能**:
- 环境变量配置
- 性能监控
- Docker化部署

## API设计规范

### 请求/响应格式

**标准响应格式**:
```json
{
    "success": true,
    "data": {},
    "error": null,
    "message": "操作成功"
}
```

**错误响应格式**:
```json
{
    "success": false,
    "data": null,
    "error": {
        "code": "VALIDATION_ERROR",
        "message": "标题不能为空"
    }
}
```

### API端点列表

#### 第一阶段API
```
POST   /api/todos              # 创建Todo
GET    /api/todos              # 获取Todo列表
GET    /api/todos/{id}         # 获取单个Todo
PUT    /api/todos/{id}         # 更新Todo
DELETE /api/todos/{id}         # 删除Todo
```

#### 第二阶段API
```
PUT    /api/todos/{id}/status  # 更新状态
PUT    /api/todos/{id}/priority # 更新优先级
PUT    /api/todos/{id}/due     # 设置截止日期
POST   /api/todos/batch        # 批量操作
```

#### 第三阶段API
```
GET    /api/todos/search       # 搜索Todo
GET    /api/tags               # 获取标签列表
POST   /api/tags               # 创建标签
POST   /api/todos/{id}/tags    # 添加标签
DELETE /api/todos/{id}/tags/{tagId} # 移除标签
GET    /api/todos/export       # 导出数据
```

## 学习检查清单

### Go语言特性掌握

#### ✅ 基础语法
- [ ] 变量声明与类型推断
- [ ] 函数定义与多返回值
- [ ] 结构体与方法
- [ ] 指针使用
- [ ] 接口实现

#### ✅ 并发编程
- [ ] Goroutine创建与管理
- [ ] Channel使用（带缓冲/无缓冲）
- [ ] Select语句
- [ ] Mutex锁机制
- [ ] WaitGroup同步

#### ✅ 错误处理
- [ ] Error接口使用
- [ ] 自定义错误类型
- [ ] 错误包装与解包
- [ ] Panic与Recover

#### ✅ 标准库使用
- [ ] net/http包
- [ ] encoding/json包
- [ ] database/sql包
- [ ] time包
- [ ] log包
- [ ] testing包

#### ✅ 项目管理
- [ ] Go Module使用
- [ ] 依赖管理
- [ ] 代码组织
- [ ] 测试覆盖率

## 项目里程碑

### 里程碑1：基础功能完成（第1周末）
- ✅ Todo CRUD完整实现
- ✅ HTTP API正常工作
- ✅ SQLite数据持久化
- ✅ 基础测试通过

### 里程碑2：并发特性应用（第2周末）
- ✅ 优先级和截止日期功能
- ✅ Goroutine并发处理
- ✅ 中间件系统
- ✅ 性能优化完成

### 里程碑3：项目完整交付（第3周末）
- ✅ 搜索过滤功能
- ✅ 标签系统
- ✅ 代码架构重构
- ✅ 部署就绪

## 扩展建议（可选）

完成基础项目后，可以考虑以下扩展：

1. **WebSocket支持** - 实时更新
2. **缓存层** - 使用Redis
3. **API限流** - 防止滥用
4. **日志聚合** - 结构化日志
5. **指标监控** - Prometheus集成
6. **GraphQL API** - 替代REST

## 学习资源推荐

### 官方文档
- [Go Tour](https://tour.golang.org/)
- [Go By Example](https://gobyexample.com/)
- [Effective Go](https://golang.org/doc/effective_go.html)

### 实践项目
- [Go Web Examples](https://gowebexamples.com/)
- [Let's Go](https://lets-go.alexedwards.net/)
- [Building Go Web Applications](https://www.safibayana.com/go-webapp-tutorial)

## 总结

这个项目设计遵循了"学习驱动"的原则，每个功能都对应Go语言的核心特性。通过3周的学习和实践，您将从Python开发者成长为能够独立开发Go应用的初级Go开发者。

记住Linus的建议："Talk is cheap. Show me the code." - 开始动手实践吧！